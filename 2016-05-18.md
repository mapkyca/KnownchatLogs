* <a id="14:09.08">14:09.08 (BST)</a> - __[mapkyca](https://github.com/mapkyca)__: @kylewm Just trying to debug export. It seems because getRecords() now returns a MappingIterator, it's not possible to simply test $results to see if it's finished (at least on mongo). Is there any reliable way to tell whether getRecords has finished?
* <a id="14:09.27">14:09.27 (BST)</a> - __[mapkyca](https://github.com/mapkyca)__: I'm not entirely sure whether getRecords _should_ be returning a MappingIterator
* <a id="15:57.02">15:57.02 (BST)</a> - __[kylewm](https://github.com/kylewm)__: mapkyca: where is it having trouble telling whether getRecords is finished? the mappingiterator is supposed to terminate when the cursor from Mongo terminates
* <a id="15:59.19">15:59.19 (BST)</a> - __[kylewm](https://github.com/kylewm)__: I don't think it was strictly necessary to add MappingIterator. iirc, the result cursor is always realized into an array right away by the caller. but I added it because I didn't want to enforce that behavior in case someone in the future wants to grab only the first few results
* <a id="16:10.49">16:10.49 (BST)</a> - __[mapkyca](https://github.com/mapkyca)__: yeah, I found the problem - patch sent. Basically mongo always returns a MongoCursor, so it wasn't possible to safely do a while ($results = ...->getRecords())
* <a id="16:11.18">16:11.18 (BST)</a> - __[mapkyca](https://github.com/mapkyca)__: one of the many examples of where mongo behaves differently to SQL based data stores
* <a id="16:11.39">16:11.39 (BST)</a> - __[mapkyca](https://github.com/mapkyca)__: I've fudged it for now, but wasn't going to spend too much time on it since we're going to kill mongo eventually
* <a id="16:55.06">16:55.06 (BST)</a> - __[kylewm](https://github.com/kylewm)__: Excellent
